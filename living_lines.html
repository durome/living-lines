<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Living Lines – Generative Art</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
      }
      canvas {
        display: block;
      }
      .signature {
        position: absolute;
        bottom: 20px;
        right: 30px;
        color: #fff;
        font-family: monospace;
        font-size: 14px;
        opacity: 0.6;
      }
    </style>
  </head>
  <body>
    <div class="signature">Eduardo Romaguera — Living Lines (2025)</div>
    <script>
      let colors = ["#00fff7", "#ff4b4b", "#ffd300", "#ffffff", "#aaff00"];
      let lines = [];

      function setup() {
        createCanvas(windowWidth, windowHeight);
        background(0);
        noFill();
        strokeWeight(2);
        frameRate(60);
      }

      function draw() {
        background(0, 20); // desvanecimiento progresivo
        if (frameCount % 5 === 0) {
          lines.push(new LivingLine());
        }
        for (let l of lines) {
          l.update();
          l.display();
        }
        lines = lines.filter(l => !l.finished);
      }

      class LivingLine {
        constructor() {
          this.x = random(width);
          this.y = random(height);
          this.life = int(random(80, 160));
          this.path = [];
          this.color = random(colors);
          this.angle = random(TWO_PI);
          this.finished = false;
        }

        update() {
          if (this.life > 0) {
            this.x += cos(this.angle) * random(3, 12);
            this.y += sin(this.angle) * random(3, 12);
            this.angle += random(-PI/3, PI/3);
            this.path.push({x: this.x, y: this.y});
            this.life--;
          } else {
            this.finished = true;
          }
        }

        display() {
          stroke(this.color);
          beginShape();
          for (let p of this.path) vertex(p.x, p.y);
          endShape();
        }
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
      }
    </script>
  </body>
</html>
